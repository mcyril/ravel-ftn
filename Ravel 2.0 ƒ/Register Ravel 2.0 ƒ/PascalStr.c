#include "PascalStr.h"asm void pStrCopy ( StringPtr p1, StringPtr p2 ){		MOVEA.L		4(A7), A0		MOVEA.L		8(A7), A1				CLR.W		D0		MOVE.B		(A0), D0@2:		MOVE.B		(A0)+, (A1)+		DBF			D0, @2@1:		RTS}asm void pStrConc ( StringPtr p1, StringPtr p2, StringPtr p3 ){		MOVEM.L		D2/A2, -(SP)		// +8		MOVEA.L		12(SP), A0		MOVEA.L		16(SP), A1		MOVEA.L		20(SP), A2				CLR.W		D0		ADDQ.L		#1, A2		MOVE.B		(A0)+, D0		MOVE.B		D0, D2		BEQ.S		@1		SUBQ.L		#1, D0@2:		MOVE.B		(A0)+, (A2)+		DBF			D0, @2@1:				CLR.W		D0		MOVE.B		(A1)+, D0		BEQ.S		@11		ADD.L		D0, D2		SUBQ.L		#1, D0@21:	MOVE.B		(A1)+, (A2)+		DBF			D0, @21@11:		MOVEA.L		20(SP), A2		MOVE.B		D2, (A2)				MOVEM.L		(SP)+, D2/A2				RTS}/*void pStrCut ( StringPtr p1, short p2, short p3, StringPtr p4 ){asm {		MOVEM.L		D2-D3, -(SP)		CLR.L		D0		CLR.L		D1		CLR.L		D2		MOVEA.L		p1(A6), A0		; Source string		MOVEA.L		p4(A6), A1		; Destination string		MOVE.W		p2(A6), D0		; From position		MOVE.W		p3(A6), D1		; Substring length				MOVE.B		(A0)+, D2		; Source string length		CMP.W		D2, D0		BGT.S		@1				; From position over str.length				MOVE.W		D0, D3		ADD.W		D1, D3			; Over position...		CMP.W		D2, D3		BGT.S		@2				; Last position over str.length@01				MOVE.B		D1, (A1)+		SUBQ.L		#1, D1		SUBQ.L		#1, D0		ADDA.L		D0, A0		@3		MOVE.B		(A0)+, (A1)+		DBF			D1, @3		BRA.S		@000@2		SUB.W		D0, D2		MOVE.W		D2, D1		ADDQ.L		#1, D1		BRA.S		@01		@1		CLR.B		(A1)		@000		MOVEM.L		(SP)+, D2-D3	}}*/asm short pcStrEqu ( StringPtr p1, char *p2 ){		MOVEM.L		D2, -(SP)		// +4				MOVEA.L		8(SP), A0		MOVEA.L		12(SP), A1				CLR.L		D0		CLR.L		D1				MOVE.B		(A0)+, D1		BEQ.S		@1		SUB.W		#1, D1@2:		MOVE.B		(A1)+, D2		BEQ.S		@1		CMP.B		(A0)+, D2		BNE.S		@1		DBF			D1, @2				MOVE.B		(A1)+, D1		SEQ			D0@1:		MOVEM.L		(SP)+, D2				RTS}asm short pStrComp ( StringPtr p1, StringPtr p2 ){				MOVEM.L		D2, -(SP)		// +4			MOVEA.L		8(SP), A0		MOVEA.L		12(SP), A1				CLR.W		D2				MOVE.B		(A0)+, D0		MOVE.B		(A1)+, D1				MOVE.B		D1, D2		CMP.B		D0, D2		BLS.S		@1				MOVE.B		D0, D2@1:		TST.W		D2		BEQ.S		@2				ORI			#0x0004, SR		BRA.S		@3@4:		CMPM.B		(A1)+, (A0)+@3:		DBNE		D2, @4		BNE.S		@exit@2:		CMP.B		D1, D0		@exit:			SNE			D0		SCS			D1		CMP.B		D0, D1		BEQ.S		@0				MOVEQ		#1, D0		@0:		EXT.W		D0				MOVEM.L		(SP)+, D2				RTS}/*void mymemcpy ( unsigned char	*dst, unsigned char	*src, long l ){	asm {			MOVEA.L		dst(A6), A0			MOVEA.L		src(A6), A1			MOVE.L		l(A6), D0				BRA.S		@1	@2			MOVE.B		(A1)+, (A0)+	@1			DBF			D0, @2	}}*/