//	¥	py_shuffler_prefs_echo.c#include "py_shuffler_prefs_echo.h"#include "py_shuffler_prefs_expitem.h"#include "PascalStr.h"static voidprefecho_dealloc(PyPrefEchoObject *v){	_Py_Dealloc(v->useAKA);	_Py_Dealloc(v->Exports);	PyObject_Del(v);}static intprefecho_init(PyPrefEchoObject *v, PyObject *args, PyObject *kwds){	v->areaName[0] = 0;	v->group = 0;	v->areaflags = 0;	v->purger = 0;		v->useAKA = NULL;	v->Exports = NULL;		return 0;}static PyObject *prefecho_getattr(PyPrefEchoObject *v, char *name){	if (strcmp(name, "name") == 0)		return PyString_FromStringAndSize((char *)&v->areaName[1], v->areaName[0]);	else if (strcmp(name, "flags") == 0)		return PyInt_FromLong(v->areaflags);	else if (strcmp(name, "purgedays") == 0)		return PyInt_FromLong(v->purger);	else if (strcmp(name, "group") == 0)	{		char ch = v->group + 'A';		return PyString_FromStringAndSize(&ch, 1);	}	else if (strcmp(name, "useaka") == 0)	{		Py_XINCREF(v->useAKA);		return v->useAKA;	}	else if (strcmp(name, "exportlist") == 0)	{		Py_XINCREF(v->Exports);		return v->Exports;	}	return NULL;}static intprefecho_setattr(PyPrefEchoObject *v, char *name, PyObject *content){	int res = -1;	return res;}static PyPrefEchoObject *prefecho_new_ex(void){	PyPrefEchoObject *res = PyObject_New(PyPrefEchoObject, &PyShufflerPrefEcho_Type);	if (res != NULL)		prefecho_init(res, NULL, NULL);	return res;}static PyObject *prefecho_repr(PyPrefEchoObject *v){	return PyString_FromStringAndSize((char *)&v->areaName[1], v->areaName[0]);}PyTypeObject PyShufflerPrefEcho_Type = {	PyObject_HEAD_INIT(&PyType_Type)	0,	"echo",	sizeof(PyPrefEchoObject),	0,	(destructor)prefecho_dealloc,						/* tp_dealloc */	0,					/* tp_print */	(getattrfunc)prefecho_getattr,						/* tp_getattr */	0 /*(setattrfunc)prefecho_setattr*/,						/* tp_setattr */	0,					/* tp_compare */	(reprfunc)prefecho_repr,						/* tp_repr */	0,					/* tp_as_number */	0,					/* tp_as_sequence */	0,					/* tp_as_mapping */	0,					/* tp_hash */	0,					/* tp_call */	0,					/* tp_str */	0,					/* tp_getattro */	0,					/* tp_setattro */	0,					/* tp_as_buffer */	Py_TPFLAGS_DEFAULT,	/* tp_flags */	0,					/* tp_doc */	0,					/* tp_traverse */	0,					/* tp_clear */	0,					/* tp_richcompare */	0,					/* tp_weaklistoffset */	0,					/* tp_iter */	0,					/* tp_iternext */	0,					/* tp_methods */	0,					/* tp_members */	0,					/* tp_getset */	0,					/* tp_base */	0,					/* tp_dict */	0,					/* tp_descr_get */	0,					/* tp_descr_set */	0,					/* tp_dictoffset */	0,					/* tp_init */	0,					/* tp_alloc */	0,					/* tp_new */};PyObject *PyShufflerPrefEchoes_Create(plugsPrefs *pp){	short	i, j;	PyObject *res;	res = PyList_New(pp->AreasNumber);	for (i = 0; i < pp->AreasNumber; i++)	{		PyPrefEchoObject *echo = prefecho_new_ex();		if(echo != NULL)		{			pStrCopy((**pp->areasHndls[i]).areaName, echo->areaName);						echo->areaflags = (**pp->areasHndls[i]).areaflags;			echo->purger = (**pp->areasHndls[i]).purger;			echo->group = (**pp->areasHndls[i]).group;			echo->useAKA = ((**pp->areasHndls[i]).useAKA == 0) ?					PyFtnAddr_NewAddr(&(**pp->homesystem).mainAddr.ad) :					PyFtnAddr_NewAddr(&(**pp->homesystem).AKAAddr[(**pp->areasHndls[i]).useAKA - 1].ad);			echo->Exports = PyList_New((**pp->areasHndls[i]).numExports);			for (j = 0; j < (**pp->areasHndls[i]).numExports; j++)			{				PyList_SetItem(echo->Exports, j,							PyExpItem_New(&(**pp->nodesHndls[(**pp->areasHndls[i]).Export[j].Export]).Addr,											(**pp->areasHndls[i]).Export[j].Diodes));			}			PyList_SetItem(res, i, (PyObject *)echo);		}	}	Py_XINCREF(res);	return (PyObject *)res;}