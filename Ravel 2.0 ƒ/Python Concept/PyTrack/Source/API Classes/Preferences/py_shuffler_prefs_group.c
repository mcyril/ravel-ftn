//	¥	py_shuffler_prefs_group.c#include "py_shuffler_prefs_group.h"#include "py_shuffler_prefs_expitem.h"#include "PascalStr.h"static voidprefgroup_dealloc(PyPrefGroupObject *v){	_Py_Dealloc(v->useAKA);	_Py_Dealloc(v->Exports);	PyObject_Del(v);}static intprefgroup_init(PyPrefGroupObject *v, PyObject *args, PyObject *kwds){	v->groupName[0] = 0;	v->areaflags = 0;	v->purger = 0;		v->useAKA = NULL;	v->Exports = NULL;		return 0;}static PyObject *prefgroup_getattr(PyPrefGroupObject *v, char *name){	if (strcmp(name, "name") == 0)		return PyString_FromStringAndSize((char *)&v->groupName[1], v->groupName[0]);	else if (strcmp(name, "flags") == 0)		return PyInt_FromLong(v->areaflags);	else if (strcmp(name, "purgedays") == 0)		return PyInt_FromLong(v->purger);	else if (strcmp(name, "useaka") == 0)	{		Py_XINCREF(v->useAKA);		return v->useAKA;	}	else if (strcmp(name, "exportlist") == 0)	{		Py_XINCREF(v->Exports);		return v->Exports;	}	return NULL;}static intprefgroup_setattr(PyPrefGroupObject *v, char *name, PyObject *content){	int res = -1;	return res;}static PyPrefGroupObject *prefgroup_new_ex(void){	PyPrefGroupObject *res = PyObject_New(PyPrefGroupObject, &PyShufflerPrefGroup_Type);	if (res != NULL)		prefgroup_init(res, NULL, NULL);	return res;}static PyObject *prefgroup_repr(PyPrefGroupObject *v){	return PyString_FromStringAndSize((char *)&v->groupName[1], v->groupName[0]);}PyTypeObject PyShufflerPrefGroup_Type = {	PyObject_HEAD_INIT(&PyType_Type)	0,	"group",	sizeof(PyPrefGroupObject),	0,	(destructor)prefgroup_dealloc,						/* tp_dealloc */	0,					/* tp_print */	(getattrfunc)prefgroup_getattr,						/* tp_getattr */	0 /*(setattrfunc)prefgroup_setattr*/,						/* tp_setattr */	0,					/* tp_compare */	(reprfunc)prefgroup_repr,						/* tp_repr */	0,					/* tp_as_number */	0,					/* tp_as_sequence */	0,					/* tp_as_mapping */	0,					/* tp_hash */	0,					/* tp_call */	0,					/* tp_str */	0,					/* tp_getattro */	0,					/* tp_setattro */	0,					/* tp_as_buffer */	Py_TPFLAGS_DEFAULT,	/* tp_flags */	0,					/* tp_doc */	0,					/* tp_traverse */	0,					/* tp_clear */	0,					/* tp_richcompare */	0,					/* tp_weaklistoffset */	0,					/* tp_iter */	0,					/* tp_iternext */	0,					/* tp_methods */	0,					/* tp_members */	0,					/* tp_getset */	0,					/* tp_base */	0,					/* tp_dict */	0,					/* tp_descr_get */	0,					/* tp_descr_set */	0,					/* tp_dictoffset */	0,					/* tp_init */	0,					/* tp_alloc */	0,					/* tp_new */};PyObject *PyShufflerPrefGroups_Create(plugsPrefs *pp){	short	i, j;	PyObject *res;	res = PyList_New(pp->GroupsNumber);	for (i = 0; i < pp->GroupsNumber; i++)	{		PyPrefGroupObject *group = prefgroup_new_ex();		if(group != NULL)		{			pStrCopy((**pp->groupsHndls[i]).groupName, group->groupName);						group->areaflags = (**pp->groupsHndls[i]).areaflags;			group->purger = (**pp->groupsHndls[i]).purger;			group->useAKA = ((**pp->groupsHndls[i]).useAKA == 0) ?					PyFtnAddr_NewAddr(&(**pp->homesystem).mainAddr.ad) :					PyFtnAddr_NewAddr(&(**pp->homesystem).AKAAddr[(**pp->groupsHndls[i]).useAKA - 1].ad);			group->Exports = PyList_New((**pp->groupsHndls[i]).numExports);			for (j = 0; j < (**pp->groupsHndls[i]).numExports; j++)			{				PyList_SetItem(group->Exports, j,							PyExpItem_New(&(**pp->nodesHndls[(**pp->groupsHndls[i]).Export[j].Export]).Addr,											(**pp->groupsHndls[i]).Export[j].Diodes));			}			PyList_SetItem(res, i, (PyObject *)group);		}	}	Py_XINCREF(res);	return (PyObject *)res;}