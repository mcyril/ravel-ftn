//	¥	py_shuffler_prefs.c#include "py_shuffler_prefs.h"#include "py_shuffler_prefs_homesys.h"#include "py_shuffler_prefs_mail.h"#include "py_shuffler_prefs_link.h"#include "py_shuffler_prefs_echo.h"#include "py_shuffler_prefs_group.h"#include "py_shuffler_prefs_route.h"#include "PascalStr.h"static	PyShufflerPrefObject *gShufflerPref = NULL;static voidprefs_dealloc(PyShufflerPrefObject *v){	_Py_Dealloc(v->homesystem);	_Py_Dealloc(v->mail);	_Py_Dealloc(v->links);	_Py_Dealloc(v->areas);	_Py_Dealloc(v->groups);	_Py_Dealloc(v->routing);	PyObject_Del(v);}static intprefs_init(PyShufflerPrefObject *v, PyObject *args, PyObject *kwds){	v->homesystem = NULL;		//	PyPrefHomeSysObject	v->mail = NULL;				//	PyPrefNetmailObject	v->areas = NULL;				//	PyListObject [PyPrefEchoObject]	v->groups = NULL;			//	PyListObject [PyPrefGroupObject]	v->links = NULL;				//	PyListObject [PyPrefLinkObject]	v->routing = NULL;			//	PyListObject [PyPrefRouteObject]	v->BundlesPath[0] = 0;	v->OutboundPath[0] = 0;	v->InboundPath[0] = 0;	v->BasePath[0] = 0;	v->TempPath[0] = 0;	v->NodeLists[0] = 0;	v->LogPath[0] = 0;	return 0;}static PyObject *prefs_getattr(PyShufflerPrefObject *v, char *name){	if (strcmp(name, "home") == 0)	{		Py_XINCREF(v->homesystem);		return v->homesystem;	}	else if (strcmp(name, "netmail") == 0)	{		Py_XINCREF(v->mail);		return v->mail;	}	else if (strcmp(name, "echoareas") == 0)	{		Py_XINCREF(v->areas);		return v->areas;	}	else if (strcmp(name, "echogroups") == 0)	{		Py_XINCREF(v->groups);		return v->groups;	}	else if (strcmp(name, "links") == 0)	{		Py_XINCREF(v->links);		return v->links;	}	else if (strcmp(name, "routing") == 0)	{		Py_XINCREF(v->routing);		return v->routing;	}	else if (strcmp(name, "bundles") == 0)		return PyString_FromStringAndSize((char *)&v->BundlesPath[1], v->BundlesPath[0]);	else if (strcmp(name, "outbound") == 0)		return PyString_FromStringAndSize((char *)&v->OutboundPath[1], v->OutboundPath[0]);	else if (strcmp(name, "inbound") == 0)		return PyString_FromStringAndSize((char *)&v->InboundPath[1], v->InboundPath[0]);	else if (strcmp(name, "base") == 0)		return PyString_FromStringAndSize((char *)&v->BasePath[1], v->BasePath[0]);	else if (strcmp(name, "temp") == 0)		return PyString_FromStringAndSize((char *)&v->TempPath[1], v->TempPath[0]);	else if (strcmp(name, "nodelist") == 0)		return PyString_FromStringAndSize((char *)&v->NodeLists[1], v->NodeLists[0]);	else if (strcmp(name, "log") == 0)		return PyString_FromStringAndSize((char *)&v->LogPath[1], v->LogPath[0]);	return NULL;}static intprefs_setattr(PyShufflerPrefObject *v, char *name, PyObject *content){	int res = -1;	return res;}static PyShufflerPrefObject *prefs_new_ex(void){	PyShufflerPrefObject *res = PyObject_New(PyShufflerPrefObject, &PyShufflerPref_Type);	if (res != NULL)		prefs_init(res, NULL, NULL);	return res;}PyTypeObject PyShufflerPref_Type = {	PyObject_HEAD_INIT(&PyType_Type)	0,	"prefs",	sizeof(PyShufflerPrefObject),	0,	(destructor)prefs_dealloc,						/* tp_dealloc */	0,					/* tp_print */	(getattrfunc)prefs_getattr,						/* tp_getattr */	0 /*(setattrfunc)prefs_setattr*/,						/* tp_setattr */	0,					/* tp_compare */	0,					/* tp_repr */	0,					/* tp_as_number */	0,					/* tp_as_sequence */	0,					/* tp_as_mapping */	0,					/* tp_hash */	0,					/* tp_call */	0,					/* tp_str */	0,					/* tp_getattro */	0,					/* tp_setattro */	0,					/* tp_as_buffer */	Py_TPFLAGS_DEFAULT,	/* tp_flags */	0,					/* tp_doc */	0,					/* tp_traverse */	0,					/* tp_clear */	0,					/* tp_richcompare */	0,					/* tp_weaklistoffset */	0,					/* tp_iter */	0,					/* tp_iternext */	0,					/* tp_methods */	0,					/* tp_members */	0,					/* tp_getset */	0,					/* tp_base */	0,					/* tp_dict */	0,					/* tp_descr_get */	0,					/* tp_descr_set */	0,					/* tp_dictoffset */	0,					/* tp_init */	0,					/* tp_alloc */	0,					/* tp_new */};PyObject *PyShufflerPref_Create(PlugsControl *pc){	gShufflerPref = prefs_new_ex();	if(gShufflerPref != NULL)	{		gShufflerPref->homesystem = PyShufflerPrefHomeSys_Create(&pc->Preferences);		gShufflerPref->mail = PyShufflerPrefMail_Create(&pc->Preferences);		gShufflerPref->links = PyShufflerPrefLinks_Create(&pc->Preferences);		gShufflerPref->areas = PyShufflerPrefEchoes_Create(&pc->Preferences);		gShufflerPref->groups = PyShufflerPrefGroups_Create(&pc->Preferences);		gShufflerPref->routing = PyShufflerPrefRouting_Create(&pc->Preferences);			pStrCopy(pc->Preferences.BundlesPath, gShufflerPref->BundlesPath);		pStrCopy(pc->Preferences.OutboundPath, gShufflerPref->OutboundPath);		pStrCopy(pc->Preferences.InboundPath, gShufflerPref->InboundPath);		pStrCopy(pc->Preferences.BasePath, gShufflerPref->BasePath);		pStrCopy(pc->Preferences.TempPath, gShufflerPref->TempPath);		pStrCopy(pc->Preferences.NodeLists, gShufflerPref->NodeLists);		pStrCopy(pc->Preferences.LogPath, gShufflerPref->LogPath);	}	Py_XINCREF(gShufflerPref);	return (PyObject *)gShufflerPref;}voidPyShufflerPref_Kill(){	_Py_Dealloc(gShufflerPref);}