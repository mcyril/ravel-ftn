#include <string.h>#include "ravel_msg_base.h"#include "pktparse.h"#include "Ravel_Prefs.h"#include "PascalStr.h"#include "AreaUtils.h"#include "stringutl.h"									extern	homeHndl		homesystem;			//	¥	Home system structextern	mailPrefHndl	mailHndl;			//	¥	Netmail structextern	short			AreasNumber;		//	¥	Areas structs listextern	areaPrefHndl	*areasHndls;extern	short			GroupsNumber;		//	¥	AreaGroups structs listextern	groupPrefHndl	*groupsHndls;extern	short			NodesNumber;		//	¥	Linked Nodes structs listextern	nodePrefHndl	*nodesHndls;extern	routeHndl		Routing;//	NETMAIL's area number is #0 !short LookForAreaNumber ( char *AreaName ){	short		i;	for ( i = 0; i < AreasNumber; i++ )		if ( pcStrCaseEqu ( (*areasHndls[i])->areaName, AreaName ) )			break;	return ( i == AreasNumber ) ? -1 : i+1;}short LookForLinkNumber (addr *to){	short	kk;		for (kk = 0; kk < NodesNumber; kk++)		if ( cmp2addrs ( &(*nodesHndls[kk])->Addr, to ) )			break;	if (kk == NodesNumber)		kk = -1;	return kk;}/*Boolean cmp2addrs ( addr *my1, addr *my2 ){	return ( my1->zone == my2->zone &&			 my1->net == my2->net &&			 my1->node == my2->node &&			 my1->point == my2->point );}*/Boolean IsItMyAddr ( addr *quest ){	short	i;	if ( cmp2addrs ( quest, &(*homesystem)->mainAddr.ad ) )		return TRUE;		for ( i = 0; i < (*homesystem)->AKAcount; i++ )		if ( cmp2addrs ( quest, &(*homesystem)->AKAAddr[i].ad ) )			return TRUE;				return FALSE;}addr *FindRouteTo ( addr *Addr ){	short	i;		for ( i = 0; i < (*Routing)->routes; i++ )		if ( addrInmask ( &(**Routing).route[i].mask, Addr ) )			break;		if ( i == (**Routing).routes )		return NULL;		return &(*(nodesHndls[(**Routing).route[i].node]))->Addr;}short FindRouteToN ( addr *Addr ){	short	i;		for ( i = 0; i < (**Routing).routes; i++ )		if ( addrInmask ( &(**Routing).route[i].mask, Addr ) )			break;		return ( i == (**Routing).routes ) ? -1 : (**Routing).route[i].node;}