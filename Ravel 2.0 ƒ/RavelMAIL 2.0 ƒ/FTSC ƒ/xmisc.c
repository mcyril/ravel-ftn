#include <stdio.h>#include "aglcrc.h"#include "xmodem.h"void Data_Check (XMDATAP xtmp, short mode){	short i;	unsigned char cs;	unsigned char *cp;	unsigned short cs1;	/* If we are in checksum mode, just do it */	if (mode == CHECKSUM)	{		cp = xtmp->data_bytes;		cs = 0;		for (i = 0; i < 128; i++)		{			cs += *cp++;		}		xtmp->data_check[0] = cs;	}	/* If we are in CRC mode, run the characters through the CRC calculator */	else	{		cs1 = crc_block (xtmp->data_bytes, 128);		xtmp->data_check[0] = (unsigned char) (cs1 >> 8);		xtmp->data_check[1] = (unsigned char) (cs1 & 0xff);	}}